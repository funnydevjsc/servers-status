<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Status</title>
  </head>
  <body>
    <h1>Server Status:</h1>
    <div id="servers">Loading...</div>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-analytics.js";
      import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore.js";
      const firebaseConfig = {
        apiKey: "AIzaSyBwfCZpCKMutYNz7t7ipKF6_XaCnpTH4ok",
        authDomain: "funnydev-servers.firebaseapp.com",
        projectId: "funnydev-servers",
        storageBucket: "funnydev-servers.appspot.com",
        messagingSenderId: "384548570568",
        appId: "1:384548570568:web:15edc540838ec05011ecfd",
        measurementId: "G-KZ895HNPXQ",
        databaseURL: "https://funnydev-servers-default-rtdb.asia-southeast1.firebasedatabase.app/"
      };
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const db = getFirestore(app);
      async function loadServerStatus() {
        const querySnapshot = await getDocs(collection(db, "servers"));
        const serversDiv = document.getElementById('servers');
        serversDiv.innerHTML = '';
        querySnapshot.forEach((doc) => {
          const data = doc.data();
          for (const serverName in data) {
            const status = data[serverName].toUpperCase();
            if (status == 'OFFLINE') {
              serversDiv.innerHTML += `<p>${serverName}: <span style="color: red">OFFLINE</span></p>`;
            } else {
              serversDiv.innerHTML += `<p>${serverName}: <span style="color: green">ONLINE</span></p>`;
            }
          }
        });
      }
      loadServerStatus();
    </script>
  </body>
</html>
